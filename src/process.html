<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Publiceringsprocess - joni2307 DT211G-1</title>
    <link rel="stylesheet" type="text/css" href="css/menu.css">
    <link rel="stylesheet" type="text/css" href="css/general.css">
</head>
<body>
    
    <nav id="mainMenu">
      <button id="menuButton">Meny - joni2307 DT211G-1</button>
      <div id="dropdownContent" class="dropdown-content">
            <a href="index.html">Informationssida</a>
            <a href="bilder.html">Bildgalleri</a>
            <a href="process.html">Publiceringsprocess</a>
        </div>
    </nav>
    <script src="js/menu.js"></script>

      <h1>Publiceringsprocess för DT211G-1</h1>
  
      <h2>NodeJS</h2>
      <ol>
          <li>
              <p>Kontrollera Node.js version och uppdatera vid behov:</p>
              <pre><code>node --version</code></pre>
              <ul>
                  <li>Ursprunglig version: v18.17.1 <i>(Jag uppdaterade till nyare version efter detta.)</i></li>
              </ul>
          </li>
        </ol>
          <h2>Initiera npm</h2>
          <ol> 
          <li>Skapa en projektmap för projektet och navigerade dit.<br>
            <pre><code>npm init</code></pre>
              <ul>
                  <li>Paketnamn: dt211g-1</li>
                  <li>Beskrivning: Moment 1 i kursen DT2111G VT2024 (MiUn)</li>
                  <li>Nyckelord: automation</li>
                  <li>Författare: joni2307</li>
              </ul>
            </li>
      </ol>
  
      <h2>Konfigurera Parcel</h2>
      <ol>
          <li>
            <p>Installera Parcel</p>
            <pre><code>sudo npm install parcel --save-dev</code></pre>
            <pre><code>sudo npm audit fix --force</code></pre>
            </li>
            <li>
            <p>Installera Sharp</p>
            <pre><code>sudo npm install sharp@^0.31.1 --save-dev --force</code></pre>
          </li>
      </ol>
  
      <h2>Starta Projektet</h2>
      <ol>
        <li><p>Starta projektet i mappen eller inifrån VS Code.</p>
        <pre><code>npm run start</code></pre></li>
      </ol>

  
      <h2>Anslut till GitHub</h2>
      <ol>
          <li>
              <p>Skapa GitHub-repositorium från VS Code.</p>
          </li>
          <li>
              <p>Skapa och byt till utvecklingsbranch <code>dev</code></p>
          </li>
          <li>
              <p>Gör commits och pusha ändringar till GitHub <code>dev</code> från VS Code</p>
          </li>
          <li>
            <p>När man har någonting att publicera så mergar man över <code>dev</code> till <code>main</code></p>
        </li>

        </ol>
  
      <h2>Publicera på Netlify</h2>
      <ol>
          <li>
              <p>Koppla GitHub-repositoriet till Netlify:</p>
              <p>Skapa en ny site på Netlify och välj det önskade GitHub-repositoriet.</p>
          </li>
          <li>
              <p>Konfigurera bygg- och publiceringsinställningar på Netlify:</p>
              <p>Ange lämpliga byggkommandon och publiceringskatalog i Netlify:s inställningar.</p>
          </li>
          <li>
              <p>Automatisk publicering vid push till GitHub:</p>
              <p>Ställ in Netlify för automatisk publicering vid varje push till main på det kopplade GitHub-repositoriet.</p>
          </li>
          <li>
            <p>Installera och konfigurera Netlify CLI:</p>
            <pre><code>sudo npm install netlify-cli -g
sudo npm install netlify-cli --save-dev
sudo netlify login
sudo netlify init</code></pre>
        </li>

        </ol>
        <h2>Publicera från dev till main-branchen</h2>
        <ol>
            <li>
                <p>Öppna terminalen i VS Code</p>
            </li>
            <li>
                <p>Byt till dev-branchen</p>
                <pre><code>git checkout dev</code></pre>
            </li>
            <li>
                <p>Pulla senaste ändringarna (valfritt)</p>
                <pre><code>git pull</code></pre>
            </li>
            <li>
                <p>Byt till main-branchen</p>
                <pre><code>git checkout main</code></pre>
            </li>
            <li>
                <p>Förena dev med main</p>
                <pre><code>git merge dev</code></pre>
            </li>
            <li>
                <p>Pusha till GitHub</p>
                <pre><code>git push origin main</code></pre>
            </li>
        </ol>
        
<h2>Bildhantering</h2>
<p>Jag tar en jpg-bild i med bra kvalitet och gör en sådan här hantering. (måste nog säga att det är mycket att skriva för att göra detta automatiskt dock).</p>

<pre><code>
    &lt;picture&gt;
    &lt;!-- AVIF format --&gt;
    &lt;source 
        srcset="pictures/sovaute.jpg?as=avif&amp;width=320 320w,
                pictures/sovaute.jpg?as=avif&amp;width=480 480w,
                pictures/sovaute.jpg?as=avif&amp;width=800 800w"
        sizes="(max-width: 600px) 320px,
               (max-width: 900px) 480px,
               800px"
        type="image/avif" /&gt;

    &lt;!-- WebP format --&gt;
    &lt;source
        srcset="pictures/sovaute.jpg?as=webp&amp;width=320 320w,
                pictures/sovaute.jpg?as=webp&amp;width=480 480w,
                pictures/sovaute.jpg?as=webp&amp;width=800 800w"
        sizes="(max-width: 600px) 320px,
               (max-width: 900px) 480px,
               800px"
        type="image/webp" /&gt;

    &lt;!-- JPEG format --&gt;
    &lt;source 
        srcset="pictures/sovaute.jpg?width=320 320w,
                pictures/sovaute.jpg?width=480 480w,
                pictures/sovaute.jpg?width=800 800w"
        sizes="(max-width: 600px) 320px,
               (max-width: 900px) 480px,
               800px"
        type="image/jpeg" /&gt;

    &lt;img src="pictures/sovaute.jpg?width=800" alt="här kan man sova utomhus" title="här kan man sova utomhus" /&gt;
&lt;/picture&gt;
</code></pre>

        <p>Parcels sharp-tjänst kommer sedan att konvertera till önskade format och storlekar nu på ett responsivt sätt. Optimering sker enligt filen sharp.config.json:</p>
        <pre><code>{
            "jpeg": {
              "quality": 75
            },
            "webp": {
              "nearLossless": true
            },
            "avif": {
                "nearLossless": true
              },
            "png": {
              "palette": true
            }
        }</code></pre>
        
        <h2>Transpilering och minifiering</h2>
        <p>Parcel kommer automatiskt nu att minifiera HTML, CSS och JavaScript-filer. JavaScript-filerna kommer även att transpileras enligt nedan i package.json:</p>
        <pre><code>"browserslist": [
            "> 0.5%",
            "last 2 versions",
            "not dead",
            "not IE 11"
        ]</code></pre>
  
        <h2>Kopiering av filer till dist-katalog</h2>
        <p>Parcel kommer automatiskt att kopiera filer som bearbetas fram från originalen som ligger i projektets src-katalog till dist-katalogen.</p>

  </body>
  </html>
